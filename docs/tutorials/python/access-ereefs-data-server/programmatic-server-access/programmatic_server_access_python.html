<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Access eReefs data â€“ eReefs tutorials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../images/logo.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-99fa6729ad23987aafeada22b1565191.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-96eb28dfcb1a9f9f854aabaf44231fb4.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-dd6d2b9046317290f37c5b7801da76c6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../site_libs/bootstrap/bootstrap-dark-521a8ba0ec993f179c3d33aa6a439ef7.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../images/navbar_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title"><em>eReefs</em> tutorials</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://www.r-project.org/"> 
<span class="menu-text"><i class="fa-brands fa-r-project" aria-label="r-project"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.python.org/"> 
<span class="menu-text"><i class="fa-brands fa-python" aria-label="python"></i> python</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">   </span>
    </span>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/open-AIMS/ereefs-tutorials"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#python-modules" id="toc-python-modules" class="nav-link active" data-scroll-target="#python-modules">Python modules</a></li>
  <li><a href="#motivating-problem" id="toc-motivating-problem" class="nav-link" data-scroll-target="#motivating-problem">Motivating problem</a></li>
  <li><a href="#example-tracking-data" id="toc-example-tracking-data" class="nav-link" data-scroll-target="#example-tracking-data">Example tracking data</a></li>
  <li><a href="#extract-data-from-server" id="toc-extract-data-from-server" class="nav-link" data-scroll-target="#extract-data-from-server">Extract data from server</a></li>
  <li><a href="#match-extracted-data-to-tracking-data" id="toc-match-extracted-data-to-tracking-data" class="nav-link" data-scroll-target="#match-extracted-data-to-tracking-data">Match extracted data to tracking data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Access eReefs data</h1>
<p class="subtitle lead">Programmatic server access <i class="fa-brands fa-python" aria-label="python"></i></p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="tutorial-description">
<p>Learn how to extract eReefs data from the AIMS server for multiple dates and points with OPeNDAP in <i class="fa-brands fa-python" aria-label="python"></i> python.</p>
</div>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>This tutorial builds on the techniques introduced in <a href="../../../../tutorials/python/access-ereefs-data-server/basic-server-access/basic_server_access_python.html">Access eReefs data: Basic server access <i class="fa-brands fa-python" aria-label="python"></i></a>.</p>
</div>
</div>
</div>
<p>In this tutorial we will look at how to get eReefs data from the <a href="https://thredds.ereefs.aims.gov.au/thredds/catalog/catalog.html">AIMS server</a> corresponding to the logged locations of tagged marine animals. Keep in mind, however, that the same methodology can be applied in any situation where we wish to extract eReefs data for a range of points with different dates of interest for each point.</p>
<section id="python-modules" class="level2">
<h2 class="anchored" data-anchor-id="python-modules">Python modules</h2>
<div id="908f5eab" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># for data analysis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># for quik maths</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> janitor <span class="im">import</span> clean_names  <span class="co"># to create consitent, 'clean' variable names</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium  <span class="co"># a python API to interactive leaflet maps</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt <span class="co"># to time how long the data export takes</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display <span class="co"># to render, i.e. 'display', html tables</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> netCDF4 <span class="im">import</span> Dataset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="motivating-problem" class="level2">
<h2 class="anchored" data-anchor-id="motivating-problem">Motivating problem</h2>
<p>The tracking of marine animals is commonly used by researchers to gain insights into the distribution, biology, behaviour and ecology of different species. However, knowing where an animal was at a certain point in time is only one piece of the puzzle. To start to understand <em>why</em> an animal was where it was, we usually require information on things like: What type of habitat is present at the location? What were the environmental conditions like at the time? What other lifeforms were present at the tracked location (e.g.&nbsp;for food or mating)?</p>
<p>In this tutorial we will pretend that we have tracking data for Loggerhead Sea Turtles and wish to get eReefs data corresponding to the tracked points (in time and space) to understand more about the likely environmental conditions experienced by our turtles.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read more: Tracking marine animals
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Marine animals are typically tracked using either acoustic or satellite tags. These tags are attached to the animals and transmit signals back to recievers, logging the animalâ€™s location at different points in time. In some cases other data such as depth, temperature, and animal movement profiles are recorded and the data transmitted to the recievers whenever possible.</p>
<p>Acoustic tracking requires a network of recievers to be placed in the ocean in order to pick up the tagsâ€™ transmitted signals when they come within range (typically around 500 m). Acoustic tracking has the advantage of being able transmit and recieve signals underwater, however is limited by the coverage of the reciever network. In some instances, researchers do without the reciever network and follow the animals around in a boat to receive the data. The suitability of acoustic tracking depends on the study species and research question.</p>
<p>Satellite tracking, on the other hand, is able to track animals over virtually the entire ocean as the tags transmit signals to a network of satellites orbiting the earth. However, unlike acoustic tags, the signals cannot be transmitted through water and the tagged animals must breach the ocean surface in order to have their location logged and any other recorded data be received. The accuracy of the logged location depends on the quality of the transmitted signal. For high-quality signals, the location uncertainty can be in the hundreds of metres, however for bad quality signals this can blow out to over 10 km.</p>
</div>
</div>
</div>
</section>
<section id="example-tracking-data" class="level2">
<h2 class="anchored" data-anchor-id="example-tracking-data">Example tracking data</h2>
<p>We will use satellite tracking data for Loggerhead Sea Turtles (<em>Caretta caretta</em>) provided in <a href="https://doi.org/10.15468/k4s6ap">Strydom (2022)</a>. This data contains tracking detections which span the length of the Great Barrier Reef off the east coast of Queensland Australia from December 2021 to April 2022 (shown in <a href="#fig-data-map" class="quarto-xref">Figure&nbsp;1</a>).</p>
<div class="callout callout-style-simple callout-caution">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>This dataset is a summarized representation of the tracking locations per 1-degree cell. This implies a coordinate uncertainty of roughly 110 km. This level of uncertainty renders the data virtually useless for most practical applications, though it will suffice for the purposes of this tutorial. Records which are landbased as a result of the uncertainty have been removed and from here on in we will just pretend that the coordinates are accurate.</p>
</div>
</div>
</div>
<div id="cell-fig-data-map" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">"data/Loggerhead_Sea_Turtle_satellite_tracking_detections__Strydom_2022_DOI10-15468-k4s6ap.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert columns names from camelCase to snake_case</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.clean_names(case_type <span class="op">=</span> <span class="st">"snake"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename some variables for easier use</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.rename(columns <span class="op">=</span> {</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gbif_id"</span>: <span class="st">"record_id"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"decimal_latitude"</span>: <span class="st">"latitude"</span>, </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"decimal_longitude"</span>: <span class="st">"longitude"</span>, </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"event_date"</span>: <span class="st">"date_time"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure date_time is in the datetime data format</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'date_time'</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">'date_time'</span>])</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Seperate date_time into date and time variables</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.assign(</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  date <span class="op">=</span> data[<span class="st">'date_time'</span>].dt.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>), </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  time <span class="op">=</span> data[<span class="st">'date_time'</span>].dt.strftime(<span class="st">"%H:%M"</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove land based records (as a result of coordinate uncertainty)</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>land_based_records <span class="op">=</span> [<span class="dv">4022992331</span>, <span class="dv">4022992326</span>, <span class="dv">4022992312</span>, <span class="dv">4022992315</span>, <span class="dv">4022992322</span>, <span class="dv">4022992306</span>]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.query(<span class="st">"record_id not in @land_based_records"</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the variables relevant to this tutorial</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>select_vars <span class="op">=</span> [<span class="st">"longitude"</span>, <span class="st">"latitude"</span>, <span class="st">"date"</span>, <span class="st">"time"</span>, <span class="st">"date_time"</span>,<span class="st">"record_id"</span>, <span class="st">"species"</span>]</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[select_vars]</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co"># View the tracking locations on an interactive map:</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Create map centred on the mean coordinates of the tracking locations</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>centre_point <span class="op">=</span> [data[<span class="st">'latitude'</span>].mean(), data[<span class="st">'longitude'</span>].mean()]</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>track_map <span class="op">=</span> folium.Map(location <span class="op">=</span> centre_point, zoom_start <span class="op">=</span> <span class="dv">4</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Add markers to map at each tracking location</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> data.itertuples():</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  coords_i <span class="op">=</span> [row.latitude, row.longitude]</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  marker_i <span class="op">=</span> folium.Marker(</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    location <span class="op">=</span> coords_i, </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    popup <span class="op">=</span> row.date_time</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  ).add_to(track_map)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>track_map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-data-map" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="2">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-map-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_2f08fb5f95e7b429ccbfd9f319571f06 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_2f08fb5f95e7b429ccbfd9f319571f06&quot; ></div>
        
</body>
<script>
    
    
            var map_2f08fb5f95e7b429ccbfd9f319571f06 = L.map(
                &quot;map_2f08fb5f95e7b429ccbfd9f319571f06&quot;,
                {
                    center: [-18.74, 148.42],
                    crs: L.CRS.EPSG3857,
                    zoom: 4,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_b891ec24878c9e2d584939d5b209bd2a = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_b891ec24878c9e2d584939d5b209bd2a.addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
            var marker_de1083e9bbc78ba9c9730ad002aa1675 = L.marker(
                [-20.5, 150.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_247c217bf56957b6aff61520b20f2170 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_10eb49cf5f4ef04a3a64ffd9f85b8f85 = $(`<div id=&quot;html_10eb49cf5f4ef04a3a64ffd9f85b8f85&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-17 17:06:32+00:00</div>`)[0];
                popup_247c217bf56957b6aff61520b20f2170.setContent(html_10eb49cf5f4ef04a3a64ffd9f85b8f85);
            
        

        marker_de1083e9bbc78ba9c9730ad002aa1675.bindPopup(popup_247c217bf56957b6aff61520b20f2170)
        ;

        
    
    
            var marker_fc9a5a48e38cd631e7542019d86329a9 = L.marker(
                [-25.5, 153.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_fad4a96e8c744b44b53c3081aea1425c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_b553f418b0399cee02dd5afe53fa51e3 = $(`<div id=&quot;html_b553f418b0399cee02dd5afe53fa51e3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-02 21:49:55+00:00</div>`)[0];
                popup_fad4a96e8c744b44b53c3081aea1425c.setContent(html_b553f418b0399cee02dd5afe53fa51e3);
            
        

        marker_fc9a5a48e38cd631e7542019d86329a9.bindPopup(popup_fad4a96e8c744b44b53c3081aea1425c)
        ;

        
    
    
            var marker_1ae2e951407404a8cb200b1bb4959457 = L.marker(
                [-24.5, 152.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_6e46de4997093e83258fb8a1b406df88 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_65ca8b8760417b4edb23855d075a2451 = $(`<div id=&quot;html_65ca8b8760417b4edb23855d075a2451&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2021-12-21 17:57:22+00:00</div>`)[0];
                popup_6e46de4997093e83258fb8a1b406df88.setContent(html_65ca8b8760417b4edb23855d075a2451);
            
        

        marker_1ae2e951407404a8cb200b1bb4959457.bindPopup(popup_6e46de4997093e83258fb8a1b406df88)
        ;

        
    
    
            var marker_7c5672281815d03fb0f29a72b3f41307 = L.marker(
                [-18.5, 147.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_39e998af7d22c0668a6c21343ad2bb6f = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_58abec2c5000cc3ec4397a2506a68571 = $(`<div id=&quot;html_58abec2c5000cc3ec4397a2506a68571&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-27 17:00:04+00:00</div>`)[0];
                popup_39e998af7d22c0668a6c21343ad2bb6f.setContent(html_58abec2c5000cc3ec4397a2506a68571);
            
        

        marker_7c5672281815d03fb0f29a72b3f41307.bindPopup(popup_39e998af7d22c0668a6c21343ad2bb6f)
        ;

        
    
    
            var marker_de2ea75faff03f9fabcaa0900d9f139e = L.marker(
                [-14.5, 145.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_bb741650720f96aefbd107b00243b70e = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_210a52defd0912beddbb3849af064ed3 = $(`<div id=&quot;html_210a52defd0912beddbb3849af064ed3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-12 10:34:12+00:00</div>`)[0];
                popup_bb741650720f96aefbd107b00243b70e.setContent(html_210a52defd0912beddbb3849af064ed3);
            
        

        marker_de2ea75faff03f9fabcaa0900d9f139e.bindPopup(popup_bb741650720f96aefbd107b00243b70e)
        ;

        
    
    
            var marker_67e3b3f86235595969443dfc48f41aec = L.marker(
                [-26.5, 153.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_fa7c49e6cf2f93f27c8ac1ed3b8a7a4f = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_881540db846385a93b3d63441ce760d0 = $(`<div id=&quot;html_881540db846385a93b3d63441ce760d0&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-12 08:59:01+00:00</div>`)[0];
                popup_fa7c49e6cf2f93f27c8ac1ed3b8a7a4f.setContent(html_881540db846385a93b3d63441ce760d0);
            
        

        marker_67e3b3f86235595969443dfc48f41aec.bindPopup(popup_fa7c49e6cf2f93f27c8ac1ed3b8a7a4f)
        ;

        
    
    
            var marker_94284e63c3211f6f858b6c36dbfd810b = L.marker(
                [-19.5, 148.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_4ff83132aee6513ba6d3b2ee288b9586 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_65910443c97b69a71d9c7913be6fab64 = $(`<div id=&quot;html_65910443c97b69a71d9c7913be6fab64&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-23 07:02:18+00:00</div>`)[0];
                popup_4ff83132aee6513ba6d3b2ee288b9586.setContent(html_65910443c97b69a71d9c7913be6fab64);
            
        

        marker_94284e63c3211f6f858b6c36dbfd810b.bindPopup(popup_4ff83132aee6513ba6d3b2ee288b9586)
        ;

        
    
    
            var marker_5e7150c62b2ce9a314349251393cac36 = L.marker(
                [-10.5, 143.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_dcc851edf7cc0e5d3209515fd9b167dd = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_04bdbca12cced9a920e4346586cb1a2b = $(`<div id=&quot;html_04bdbca12cced9a920e4346586cb1a2b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-04-14 06:31:48+00:00</div>`)[0];
                popup_dcc851edf7cc0e5d3209515fd9b167dd.setContent(html_04bdbca12cced9a920e4346586cb1a2b);
            
        

        marker_5e7150c62b2ce9a314349251393cac36.bindPopup(popup_dcc851edf7cc0e5d3209515fd9b167dd)
        ;

        
    
    
            var marker_aea1adea12711fbc8ec066d3a1018f29 = L.marker(
                [-20.5, 149.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_66dce6d4ee4510c9a32ea687197300cc = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c0e7b17befcbc47cc3966ebec31e741e = $(`<div id=&quot;html_c0e7b17befcbc47cc3966ebec31e741e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-19 17:44:38+00:00</div>`)[0];
                popup_66dce6d4ee4510c9a32ea687197300cc.setContent(html_c0e7b17befcbc47cc3966ebec31e741e);
            
        

        marker_aea1adea12711fbc8ec066d3a1018f29.bindPopup(popup_66dce6d4ee4510c9a32ea687197300cc)
        ;

        
    
    
            var marker_38ea879ac28ab16b74206ab263c39963 = L.marker(
                [-22.5, 151.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_32be1a3146f19ad74be95e58499d295d = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ad9dd5c71e935febf80bb886ac05219e = $(`<div id=&quot;html_ad9dd5c71e935febf80bb886ac05219e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-09 20:25:01+00:00</div>`)[0];
                popup_32be1a3146f19ad74be95e58499d295d.setContent(html_ad9dd5c71e935febf80bb886ac05219e);
            
        

        marker_38ea879ac28ab16b74206ab263c39963.bindPopup(popup_32be1a3146f19ad74be95e58499d295d)
        ;

        
    
    
            var marker_3d9a02f604c1209ebb3a9878ed24f907 = L.marker(
                [-21.5, 150.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_7fe5a49ecf30f102d107060857b1522b = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_dc48b51a24fd0d83506c6e727eb59d5b = $(`<div id=&quot;html_dc48b51a24fd0d83506c6e727eb59d5b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-14 18:26:17+00:00</div>`)[0];
                popup_7fe5a49ecf30f102d107060857b1522b.setContent(html_dc48b51a24fd0d83506c6e727eb59d5b);
            
        

        marker_3d9a02f604c1209ebb3a9878ed24f907.bindPopup(popup_7fe5a49ecf30f102d107060857b1522b)
        ;

        
    
    
            var marker_ddcdaf7924f92b698b79e1d96837c110 = L.marker(
                [-11.5, 143.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_f2cb03aade7b11fddeb6fb456c4623f5 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_2eda343175a46faf5bff62231b785f26 = $(`<div id=&quot;html_2eda343175a46faf5bff62231b785f26&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-04-09 22:00:54+00:00</div>`)[0];
                popup_f2cb03aade7b11fddeb6fb456c4623f5.setContent(html_2eda343175a46faf5bff62231b785f26);
            
        

        marker_ddcdaf7924f92b698b79e1d96837c110.bindPopup(popup_f2cb03aade7b11fddeb6fb456c4623f5)
        ;

        
    
    
            var marker_1564d06e4acd74f9fd2db2f1fb937656 = L.marker(
                [-19.5, 149.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_2d6b85df7c1112ab4628c0b2701e9c23 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_9f74c38eb6eac85bf6c16c413553a9e6 = $(`<div id=&quot;html_9f74c38eb6eac85bf6c16c413553a9e6&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-21 07:22:08+00:00</div>`)[0];
                popup_2d6b85df7c1112ab4628c0b2701e9c23.setContent(html_9f74c38eb6eac85bf6c16c413553a9e6);
            
        

        marker_1564d06e4acd74f9fd2db2f1fb937656.bindPopup(popup_2d6b85df7c1112ab4628c0b2701e9c23)
        ;

        
    
    
            var marker_71ad1b6486580c492f2fe9b6041919d0 = L.marker(
                [-18.5, 146.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_ee57a51d7f1267ba809f1b6144045a66 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_e5b3e28da59bbec64ef39642f5e84eac = $(`<div id=&quot;html_e5b3e28da59bbec64ef39642f5e84eac&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-30 17:02:42+00:00</div>`)[0];
                popup_ee57a51d7f1267ba809f1b6144045a66.setContent(html_e5b3e28da59bbec64ef39642f5e84eac);
            
        

        marker_71ad1b6486580c492f2fe9b6041919d0.bindPopup(popup_ee57a51d7f1267ba809f1b6144045a66)
        ;

        
    
    
            var marker_59c6c283e0d35b8bf6a4bdc26e482c54 = L.marker(
                [-24.5, 153.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_2dceafb1a699fca3cce1899036ab526c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_019c917180879d10417f84c874b85a26 = $(`<div id=&quot;html_019c917180879d10417f84c874b85a26&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-03 21:37:56+00:00</div>`)[0];
                popup_2dceafb1a699fca3cce1899036ab526c.setContent(html_019c917180879d10417f84c874b85a26);
            
        

        marker_59c6c283e0d35b8bf6a4bdc26e482c54.bindPopup(popup_2dceafb1a699fca3cce1899036ab526c)
        ;

        
    
    
            var marker_834d14122f633588dbb080a2a6253d78 = L.marker(
                [-15.5, 145.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_dc6a04647e1693d26f80c6459f36d147 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_bbae865314960cf1455d6944ca6f70e2 = $(`<div id=&quot;html_bbae865314960cf1455d6944ca6f70e2&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-09 18:33:03+00:00</div>`)[0];
                popup_dc6a04647e1693d26f80c6459f36d147.setContent(html_bbae865314960cf1455d6944ca6f70e2);
            
        

        marker_834d14122f633588dbb080a2a6253d78.bindPopup(popup_dc6a04647e1693d26f80c6459f36d147)
        ;

        
    
    
            var marker_e5b74e3d93dbf6627ef95d5dc903f0b0 = L.marker(
                [-16.5, 145.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_8211a7bd72f26a0fdaab27296bce2447 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_1f27c1f4dec6e23b510205e353e59d78 = $(`<div id=&quot;html_1f27c1f4dec6e23b510205e353e59d78&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-07 07:15:30+00:00</div>`)[0];
                popup_8211a7bd72f26a0fdaab27296bce2447.setContent(html_1f27c1f4dec6e23b510205e353e59d78);
            
        

        marker_e5b74e3d93dbf6627ef95d5dc903f0b0.bindPopup(popup_8211a7bd72f26a0fdaab27296bce2447)
        ;

        
    
    
            var marker_92853aa57767c4bdedb28b0993f12992 = L.marker(
                [-13.5, 144.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_ea3b5d98107ea62e4e9e92bcc6261270 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_dccaccbe1ec3bb070ab1aaf561d1f7a2 = $(`<div id=&quot;html_dccaccbe1ec3bb070ab1aaf561d1f7a2&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-03-25 07:10:49+00:00</div>`)[0];
                popup_ea3b5d98107ea62e4e9e92bcc6261270.setContent(html_dccaccbe1ec3bb070ab1aaf561d1f7a2);
            
        

        marker_92853aa57767c4bdedb28b0993f12992.bindPopup(popup_ea3b5d98107ea62e4e9e92bcc6261270)
        ;

        
    
    
            var marker_9589e3d45c3061c8b9c5c00c0b0e89e2 = L.marker(
                [-21.5, 151.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_bbad68b730e8a4c2183b388f827fb16b = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_49e181a5053f545b52a43d02eeeee95b = $(`<div id=&quot;html_49e181a5053f545b52a43d02eeeee95b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-13 06:28:09+00:00</div>`)[0];
                popup_bbad68b730e8a4c2183b388f827fb16b.setContent(html_49e181a5053f545b52a43d02eeeee95b);
            
        

        marker_9589e3d45c3061c8b9c5c00c0b0e89e2.bindPopup(popup_bbad68b730e8a4c2183b388f827fb16b)
        ;

        
    
    
            var marker_75032081741979ac5b64105c4d847abd = L.marker(
                [-12.5, 143.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_cd6004ee9d4a407fdc2e9b35b67f3e35 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_f14b8d5840484f800dc0b7dbdd40c521 = $(`<div id=&quot;html_f14b8d5840484f800dc0b7dbdd40c521&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-04-01 18:41:42+00:00</div>`)[0];
                popup_cd6004ee9d4a407fdc2e9b35b67f3e35.setContent(html_f14b8d5840484f800dc0b7dbdd40c521);
            
        

        marker_75032081741979ac5b64105c4d847abd.bindPopup(popup_cd6004ee9d4a407fdc2e9b35b67f3e35)
        ;

        
    
    
            var marker_64349d9acf76b404824e80c98f0d9b26 = L.marker(
                [-9.5, 143.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_804ef0160885babfa75ee886455a1d83 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a37d5a068cb9a429910e70b8a08f5c7c = $(`<div id=&quot;html_a37d5a068cb9a429910e70b8a08f5c7c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-04-21 10:30:09+00:00</div>`)[0];
                popup_804ef0160885babfa75ee886455a1d83.setContent(html_a37d5a068cb9a429910e70b8a08f5c7c);
            
        

        marker_64349d9acf76b404824e80c98f0d9b26.bindPopup(popup_804ef0160885babfa75ee886455a1d83)
        ;

        
    
    
            var marker_14003b5b679bd5f79c798e370dbe2a5b = L.marker(
                [-23.5, 152.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_5d80c1375a66d54d92678947cdaff4d6 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3104eeb2f0ed756bdd4a915d085c1150 = $(`<div id=&quot;html_3104eeb2f0ed756bdd4a915d085c1150&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-05 07:33:53+00:00</div>`)[0];
                popup_5d80c1375a66d54d92678947cdaff4d6.setContent(html_3104eeb2f0ed756bdd4a915d085c1150);
            
        

        marker_14003b5b679bd5f79c798e370dbe2a5b.bindPopup(popup_5d80c1375a66d54d92678947cdaff4d6)
        ;

        
    
    
            var marker_a4509671022c579e1c0ff1e6d3e99066 = L.marker(
                [-16.5, 146.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_18e569710f4574bfbab0fb0e4299cdf5 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0f25abad45d6f2df0d68b0a4775211e4 = $(`<div id=&quot;html_0f25abad45d6f2df0d68b0a4775211e4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-06 18:25:38+00:00</div>`)[0];
                popup_18e569710f4574bfbab0fb0e4299cdf5.setContent(html_0f25abad45d6f2df0d68b0a4775211e4);
            
        

        marker_a4509671022c579e1c0ff1e6d3e99066.bindPopup(popup_18e569710f4574bfbab0fb0e4299cdf5)
        ;

        
    
    
            var marker_ea94612c05a203c6903b9300e0e7913c = L.marker(
                [-23.5, 151.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_6f8603d7b673ce5723180acd1cb71f29 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_77bfc55cf6c30a6dc1e7186a03c3d4a6 = $(`<div id=&quot;html_77bfc55cf6c30a6dc1e7186a03c3d4a6&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-01-06 05:03:23+00:00</div>`)[0];
                popup_6f8603d7b673ce5723180acd1cb71f29.setContent(html_77bfc55cf6c30a6dc1e7186a03c3d4a6);
            
        

        marker_ea94612c05a203c6903b9300e0e7913c.bindPopup(popup_6f8603d7b673ce5723180acd1cb71f29)
        ;

        
    
    
            var marker_25394d757a3eb8346b19fde4a9bdfaf9 = L.marker(
                [-17.5, 146.5],
                {}
            ).addTo(map_2f08fb5f95e7b429ccbfd9f319571f06);
        
    
        var popup_bafc60a1d8923c4f49fb5948d2425ba4 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ad40793183e50fc2f8945bc84e0311c6 = $(`<div id=&quot;html_ad40793183e50fc2f8945bc84e0311c6&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;>2022-02-02 09:14:56+00:00</div>`)[0];
                popup_bafc60a1d8923c4f49fb5948d2425ba4.setContent(html_ad40793183e50fc2f8945bc84e0311c6);
            
        

        marker_25394d757a3eb8346b19fde4a9bdfaf9.bindPopup(popup_bafc60a1d8923c4f49fb5948d2425ba4)
        ;

        
    
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-map-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Loggerhead Sea Turtle satellite tracking records (December 2021 - April 2022)
</figcaption>
</figure>
</div>
</div>
</section>
<section id="extract-data-from-server" class="level2">
<h2 class="anchored" data-anchor-id="extract-data-from-server">Extract data from server</h2>
<p>We will extend the basic methods introduced in the preceeding tutorial <a href="../../../../tutorials/python/access-ereefs-data-server/basic-server-access/basic_server_access_python.html">Accessing eReefs data from the AIMS server</a> to extract data for a set of points and dates.</p>
<p>We will extract the eReefs 1km hydrodynamic model daily mean temperature (<code>temp</code>), salinity (<code>salt</code>), and east- and northward current velocities (<code>u</code> and <code>v</code>) corresponding to the coordinates and dates for the tracking detections shown in <a href="#tbl-detections" class="quarto-xref">Table&nbsp;1</a>.</p>
<div id="b6d031ee" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table of tracking detections (sort by date-time; select relevant variables)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>tbl_detections <span class="op">=</span> data.<span class="op">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  sort_values(<span class="st">'date_time'</span>)<span class="op">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  [[<span class="st">'date'</span>, <span class="st">'time'</span>, <span class="st">'longitude'</span>, <span class="st">'latitude'</span>]]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Output table in html format (hide row indices; format coordinates to their precision of 1 decimal place)</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>tbl_detections <span class="op">=</span> tbl_detections.style.<span class="op">\</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  hide(axis <span class="op">=</span> <span class="st">'index'</span>).<span class="op">\</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="bu">format</span>(precision<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>display(tbl_detections)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell scroll_box_y" data-execution_count="4">
<div id="tbl-detections" class="cell scroll_box_y quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="4">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-detections-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Loggerhead Sea Turtle detections (Strydom, 2022)
</figcaption>
<div aria-describedby="tbl-detections-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="4">
<style type="text/css">
</style>

<table id="T_76ca7" class="do-not-create-environment cell scroll_box_y caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_76ca7_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">date</th>
<th id="T_76ca7_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">time</th>
<th id="T_76ca7_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">longitude</th>
<th id="T_76ca7_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">latitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_76ca7_row0_col0" class="data row0 col0">2021-12-21</td>
<td id="T_76ca7_row0_col1" class="data row0 col1">17:57</td>
<td id="T_76ca7_row0_col2" class="data row0 col2">152.5</td>
<td id="T_76ca7_row0_col3" class="data row0 col3">-24.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row1_col0" class="data row1 col0">2022-01-02</td>
<td id="T_76ca7_row1_col1" class="data row1 col1">21:49</td>
<td id="T_76ca7_row1_col2" class="data row1 col2">153.5</td>
<td id="T_76ca7_row1_col3" class="data row1 col3">-25.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row2_col0" class="data row2 col0">2022-01-05</td>
<td id="T_76ca7_row2_col1" class="data row2 col1">07:33</td>
<td id="T_76ca7_row2_col2" class="data row2 col2">152.5</td>
<td id="T_76ca7_row2_col3" class="data row2 col3">-23.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row3_col0" class="data row3 col0">2022-01-06</td>
<td id="T_76ca7_row3_col1" class="data row3 col1">05:03</td>
<td id="T_76ca7_row3_col2" class="data row3 col2">151.5</td>
<td id="T_76ca7_row3_col3" class="data row3 col3">-23.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row4_col0" class="data row4 col0">2022-01-09</td>
<td id="T_76ca7_row4_col1" class="data row4 col1">20:25</td>
<td id="T_76ca7_row4_col2" class="data row4 col2">151.5</td>
<td id="T_76ca7_row4_col3" class="data row4 col3">-22.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row5_col0" class="data row5 col0">2022-01-13</td>
<td id="T_76ca7_row5_col1" class="data row5 col1">06:28</td>
<td id="T_76ca7_row5_col2" class="data row5 col2">151.5</td>
<td id="T_76ca7_row5_col3" class="data row5 col3">-21.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row6_col0" class="data row6 col0">2022-01-14</td>
<td id="T_76ca7_row6_col1" class="data row6 col1">18:26</td>
<td id="T_76ca7_row6_col2" class="data row6 col2">150.5</td>
<td id="T_76ca7_row6_col3" class="data row6 col3">-21.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row7_col0" class="data row7 col0">2022-01-17</td>
<td id="T_76ca7_row7_col1" class="data row7 col1">17:06</td>
<td id="T_76ca7_row7_col2" class="data row7 col2">150.5</td>
<td id="T_76ca7_row7_col3" class="data row7 col3">-20.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row8_col0" class="data row8 col0">2022-01-19</td>
<td id="T_76ca7_row8_col1" class="data row8 col1">17:44</td>
<td id="T_76ca7_row8_col2" class="data row8 col2">149.5</td>
<td id="T_76ca7_row8_col3" class="data row8 col3">-20.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row9_col0" class="data row9 col0">2022-01-21</td>
<td id="T_76ca7_row9_col1" class="data row9 col1">07:22</td>
<td id="T_76ca7_row9_col2" class="data row9 col2">149.5</td>
<td id="T_76ca7_row9_col3" class="data row9 col3">-19.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row10_col0" class="data row10 col0">2022-01-23</td>
<td id="T_76ca7_row10_col1" class="data row10 col1">07:02</td>
<td id="T_76ca7_row10_col2" class="data row10 col2">148.5</td>
<td id="T_76ca7_row10_col3" class="data row10 col3">-19.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row11_col0" class="data row11 col0">2022-01-27</td>
<td id="T_76ca7_row11_col1" class="data row11 col1">17:00</td>
<td id="T_76ca7_row11_col2" class="data row11 col2">147.5</td>
<td id="T_76ca7_row11_col3" class="data row11 col3">-18.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row12_col0" class="data row12 col0">2022-01-30</td>
<td id="T_76ca7_row12_col1" class="data row12 col1">17:02</td>
<td id="T_76ca7_row12_col2" class="data row12 col2">146.5</td>
<td id="T_76ca7_row12_col3" class="data row12 col3">-18.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row13_col0" class="data row13 col0">2022-02-02</td>
<td id="T_76ca7_row13_col1" class="data row13 col1">09:14</td>
<td id="T_76ca7_row13_col2" class="data row13 col2">146.5</td>
<td id="T_76ca7_row13_col3" class="data row13 col3">-17.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row14_col0" class="data row14 col0">2022-02-03</td>
<td id="T_76ca7_row14_col1" class="data row14 col1">21:37</td>
<td id="T_76ca7_row14_col2" class="data row14 col2">153.5</td>
<td id="T_76ca7_row14_col3" class="data row14 col3">-24.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row15_col0" class="data row15 col0">2022-02-06</td>
<td id="T_76ca7_row15_col1" class="data row15 col1">18:25</td>
<td id="T_76ca7_row15_col2" class="data row15 col2">146.5</td>
<td id="T_76ca7_row15_col3" class="data row15 col3">-16.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row16_col0" class="data row16 col0">2022-02-07</td>
<td id="T_76ca7_row16_col1" class="data row16 col1">07:15</td>
<td id="T_76ca7_row16_col2" class="data row16 col2">145.5</td>
<td id="T_76ca7_row16_col3" class="data row16 col3">-16.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row17_col0" class="data row17 col0">2022-02-09</td>
<td id="T_76ca7_row17_col1" class="data row17 col1">18:33</td>
<td id="T_76ca7_row17_col2" class="data row17 col2">145.5</td>
<td id="T_76ca7_row17_col3" class="data row17 col3">-15.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row18_col0" class="data row18 col0">2022-02-12</td>
<td id="T_76ca7_row18_col1" class="data row18 col1">08:59</td>
<td id="T_76ca7_row18_col2" class="data row18 col2">153.5</td>
<td id="T_76ca7_row18_col3" class="data row18 col3">-26.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row19_col0" class="data row19 col0">2022-02-12</td>
<td id="T_76ca7_row19_col1" class="data row19 col1">10:34</td>
<td id="T_76ca7_row19_col2" class="data row19 col2">145.5</td>
<td id="T_76ca7_row19_col3" class="data row19 col3">-14.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row20_col0" class="data row20 col0">2022-03-25</td>
<td id="T_76ca7_row20_col1" class="data row20 col1">07:10</td>
<td id="T_76ca7_row20_col2" class="data row20 col2">144.5</td>
<td id="T_76ca7_row20_col3" class="data row20 col3">-13.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row21_col0" class="data row21 col0">2022-04-01</td>
<td id="T_76ca7_row21_col1" class="data row21 col1">18:41</td>
<td id="T_76ca7_row21_col2" class="data row21 col2">143.5</td>
<td id="T_76ca7_row21_col3" class="data row21 col3">-12.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row22_col0" class="data row22 col0">2022-04-09</td>
<td id="T_76ca7_row22_col1" class="data row22 col1">22:00</td>
<td id="T_76ca7_row22_col2" class="data row22 col2">143.5</td>
<td id="T_76ca7_row22_col3" class="data row22 col3">-11.5</td>
</tr>
<tr class="even">
<td id="T_76ca7_row23_col0" class="data row23 col0">2022-04-14</td>
<td id="T_76ca7_row23_col1" class="data row23 col1">06:31</td>
<td id="T_76ca7_row23_col2" class="data row23 col2">143.5</td>
<td id="T_76ca7_row23_col3" class="data row23 col3">-10.5</td>
</tr>
<tr class="odd">
<td id="T_76ca7_row24_col0" class="data row24 col0">2022-04-21</td>
<td id="T_76ca7_row24_col1" class="data row24 col1">10:30</td>
<td id="T_76ca7_row24_col2" class="data row24 col2">143.5</td>
<td id="T_76ca7_row24_col3" class="data row24 col3">-9.5</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p><br></p>
<p>We will take advantage of the consistent file naming on the server to extract the data of interest programatically. We will first need to copy the OPeNDAP data link for one of the files within the correct model and aggregation folders and then replace the date.</p>
<p>Selecting a random date within the daily aggregated data (<code>daily-daily</code>; one data file per day) for the 1km hydro model (<code>gbr1_2.0</code>), we see the files have the naming format:</p>
<p><code>https://thredds.ereefs.aims.gov.au/thredds/dodsC/ereefs/gbr1_2.0/daily-daily/EREEFS_AIMS-CSIRO_gbr1_2.0_hydro_daily-daily-</code><span style="color: red">YYYY-MM-DD</span><code>.nc</code></p>
<p>We will now write a script which extracts the data for the dates and coordinates in <a href="#tbl-detections" class="quarto-xref">Table&nbsp;1</a>. For each unique date we will open the corresponding file on the server and extract the daily mean temperature, salinity, northward and southward current velocities for each set of coordinates corresponding to the date.</p>
<div id="8689a7de" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GET DATA FOR EACH DATE AND COORDINATE (LAT LON) PAIR</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>t_start <span class="op">=</span> dt.datetime.now() <span class="co"># to track run time of extraction</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1. Setup variables for data extraction</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Server file name = &lt;file_prefix&gt;&lt;date (yyyy-mm-dd)&gt;&lt;file_suffix&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>file_prefix <span class="op">=</span> <span class="st">"https://thredds.ereefs.aims.gov.au/thredds/dodsC/ereefs/gbr1_2.0/daily-daily/EREEFS_AIMS-CSIRO_gbr1_2.0_hydro_daily-daily-"</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>file_suffix <span class="op">=</span> <span class="st">".nc"</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Table of dates and coordinates for which to extract data (dates as character string)</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>detections <span class="op">=</span> data[[<span class="st">'date'</span>, <span class="st">'longitude'</span>, <span class="st">'latitude'</span>]].drop_duplicates()</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="op">=</span> pd.DataFrame() <span class="co"># to save the extracted data</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> detections[<span class="st">'date'</span>].unique() <span class="co"># unique dates for which to open server files</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 2. For each date of interest, open a connection to the corresponding data file on the server</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(dates)):</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  date_i <span class="op">=</span> dates[i]</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Open file</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  file_name_i <span class="op">=</span> file_prefix <span class="op">+</span> dates[i] <span class="op">+</span> file_suffix</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  server_file_i <span class="op">=</span> Dataset(file_name_i)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Coordinates for which to extract data for the current date</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  coordinates_i <span class="op">=</span> detections.query(<span class="st">"date == @date_i"</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get all coordinates in the open file (each representing the center-point of the corresponding grid cell)</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  server_lons_i <span class="op">=</span> server_file_i.variables[<span class="st">'longitude'</span>][:]</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  server_lats_i <span class="op">=</span> server_file_i.variables[<span class="st">'latitude'</span>][:]</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">## 3. For each coordinate (lon, lat) for the current date, get the data for the closest grid cell (1km^2) from the open server file</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> row_j <span class="kw">in</span> coordinates_i.itertuples():</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Current coordinate of interest</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    lon_j <span class="op">=</span> row_j.longitude</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    lat_j <span class="op">=</span> row_j.latitude</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find the index of the grid cell containing our coordinate of interest (i.e. the center-point closest to our point of interest)</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    lon_index_j <span class="op">=</span> np.argmin(np.<span class="bu">abs</span>(server_lons_i <span class="op">-</span> lon_j))</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    lat_index_j <span class="op">=</span> np.argmin(np.<span class="bu">abs</span>(server_lats_i <span class="op">-</span> lat_j))</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Note: This will return the closest grid cell, even for coordinates outside of the eReefs model boundary</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Setup the dimension indices for which to extract data (needs to be a tuple; recall that python starts counting at 0)</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    dim_ind <span class="op">=</span> <span class="bu">tuple</span>([<span class="dv">0</span>, <span class="dv">15</span>, lat_index_j, lon_index_j])</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">######################################## </span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recall the order of the dimensions (time, k, latitude, longitude) from the previous tutorial. Therefore we want [time = 1 (as we're using the daily files this is the only option), k = 15 corresponding to a depth of 0.5m, lat_index_j, lon_index_j]. If you are still confused, go back to the previous tutorial or have a look at the structure of one of the server files by uncommenting the following 5 lines of code:</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># not_yet_run = True  # used so the following lines are only run once</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if not_yet_run: </span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   print(server_file_i.dimensions)</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   print(server_file_i.variables)</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   not_yet_run = False</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">########################################</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the data for the grid cell containing our point of interest</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    temp_j <span class="op">=</span> server_file_i.variables[<span class="st">'temp'</span>][dim_ind]</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>    salt_j <span class="op">=</span> server_file_i.variables[<span class="st">'salt'</span>][dim_ind]</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>    u_j <span class="op">=</span> server_file_i.variables[<span class="st">'u'</span>][dim_ind]</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    v_j <span class="op">=</span> server_file_i.variables[<span class="st">'v'</span>][dim_ind]</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    extracted_data_j <span class="op">=</span> pd.DataFrame({</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>      <span class="st">'date'</span>: [date_i],</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>      <span class="st">'lon'</span>: [lon_j],</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>      <span class="st">'lat'</span>: [lat_j],</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">'temp'</span>: [temp_j],</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>      <span class="st">'salt'</span>: [salt_j],</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>      <span class="st">'u'</span>: [u_j],</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>      <span class="st">'v'</span>: [v_j]</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">## 4. Save data in memory and repeat for next date-coordinate pair</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    extracted_data <span class="op">=</span> pd.concat([extracted_data, extracted_data_j], ignore_index <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Close connection to open server file and move to the next date</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>  server_file_i.close()</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the run time of the extraction</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>t_stop <span class="op">=</span> dt.datetime.now()</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>extract_time <span class="op">=</span> t_stop <span class="op">-</span> t_start</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>extract_mins <span class="op">=</span> <span class="bu">int</span>(extract_time.total_seconds()<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>extract_secs <span class="op">=</span> <span class="bu">int</span>(extract_time.total_seconds() <span class="op">%</span> <span class="dv">60</span>)</span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Data extracted for"</span>, <span class="bu">len</span>(detections), <span class="st">"points from"</span>, <span class="bu">len</span>(dates), <span class="st">"files. </span><span class="ch">\n</span><span class="st">Extraction time:"</span>, extract_mins, <span class="st">"min"</span>, extract_secs, <span class="st">"sec."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Data extracted for 25 points from 24 files. 
Extraction time: 1 min 10 sec.</code></pre>
</div>
</div>
<p>Our extracted data is shown below in <a href="#tbl-extracted-data" class="quarto-xref">Table&nbsp;2</a>.</p>
<div class="callout callout-style-simple callout-caution">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>In the code above we match the closest eReefs model grid cell to each point in our list of coordinates (i.e.&nbsp;for each tracking detection). This will therefore match grid cells to all the coordinates, even if they are not within the eReefs model boundary. This behaviour may be useful when we have points right along the coastline as the eReefs models have small gaps at many points along the coast (see image below). However, in other cases this behaviour may not be desirable. For example, if we had points down near Sydney they would be matched to the closest eReefs grid cells (somewhere up near Brisbane) and the extracted data would be erroneous.</p>
<p><a href="images/ereefs_model_boundary_and_grid_cells.jpeg"><img src="images/ereefs_model_boundary_and_grid_cells.jpeg" class="img-fluid"></a></p>
</div>
</div>
</div>
<div id="da21b235" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Output table in html format (sort by date; hide row indices; format coordinates to their precision of 1 decimal place, temp &amp; salt to 2 dp, u &amp; v to 3 dp)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tbl_extracted <span class="op">=</span> extracted_data.sort_values(<span class="st">'date'</span>).style.<span class="op">\</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  hide(axis <span class="op">=</span> <span class="st">'index'</span>).<span class="op">\</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">format</span>({</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'lon'</span>, <span class="st">'lat'</span>], <span class="st">'</span><span class="sc">{:.1f}</span><span class="st">'</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'temp'</span>, <span class="st">'salt'</span>], <span class="st">'</span><span class="sc">{:.2f}</span><span class="st">'</span>), </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'u'</span>, <span class="st">'v'</span>], <span class="st">'</span><span class="sc">{:.3f}</span><span class="st">'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>display(tbl_extracted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell scroll_box_xy" data-execution_count="7">
<div id="tbl-extracted-data" class="cell scroll_box_xy quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="7">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-extracted-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Extracted daily mean temperature, salinity, and east- and northward current velocities (u, v respectively) for Loggerhead Sea Turtle detections (Strydom, 2022)
</figcaption>
<div aria-describedby="tbl-extracted-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="7">
<style type="text/css">
</style>

<table id="T_aafeb" class="do-not-create-environment cell scroll_box_xy caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_aafeb_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">date</th>
<th id="T_aafeb_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">lon</th>
<th id="T_aafeb_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">lat</th>
<th id="T_aafeb_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">temp</th>
<th id="T_aafeb_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">salt</th>
<th id="T_aafeb_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">u</th>
<th id="T_aafeb_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">v</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_aafeb_row0_col0" class="data row0 col0">2021-12-21</td>
<td id="T_aafeb_row0_col1" class="data row0 col1">152.5</td>
<td id="T_aafeb_row0_col2" class="data row0 col2">-24.5</td>
<td id="T_aafeb_row0_col3" class="data row0 col3">28.09</td>
<td id="T_aafeb_row0_col4" class="data row0 col4">35.26</td>
<td id="T_aafeb_row0_col5" class="data row0 col5">0.071</td>
<td id="T_aafeb_row0_col6" class="data row0 col6">-0.020</td>
</tr>
<tr class="even">
<td id="T_aafeb_row1_col0" class="data row1 col0">2022-01-02</td>
<td id="T_aafeb_row1_col1" class="data row1 col1">153.5</td>
<td id="T_aafeb_row1_col2" class="data row1 col2">-25.5</td>
<td id="T_aafeb_row1_col3" class="data row1 col3">26.00</td>
<td id="T_aafeb_row1_col4" class="data row1 col4">35.30</td>
<td id="T_aafeb_row1_col5" class="data row1 col5">-0.035</td>
<td id="T_aafeb_row1_col6" class="data row1 col6">0.038</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row2_col0" class="data row2 col0">2022-01-05</td>
<td id="T_aafeb_row2_col1" class="data row2 col1">152.5</td>
<td id="T_aafeb_row2_col2" class="data row2 col2">-23.5</td>
<td id="T_aafeb_row2_col3" class="data row2 col3">25.64</td>
<td id="T_aafeb_row2_col4" class="data row2 col4">35.23</td>
<td id="T_aafeb_row2_col5" class="data row2 col5">0.030</td>
<td id="T_aafeb_row2_col6" class="data row2 col6">0.015</td>
</tr>
<tr class="even">
<td id="T_aafeb_row3_col0" class="data row3 col0">2022-01-06</td>
<td id="T_aafeb_row3_col1" class="data row3 col1">151.5</td>
<td id="T_aafeb_row3_col2" class="data row3 col2">-23.5</td>
<td id="T_aafeb_row3_col3" class="data row3 col3">28.13</td>
<td id="T_aafeb_row3_col4" class="data row3 col4">35.41</td>
<td id="T_aafeb_row3_col5" class="data row3 col5">-0.033</td>
<td id="T_aafeb_row3_col6" class="data row3 col6">0.015</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row4_col0" class="data row4 col0">2022-01-09</td>
<td id="T_aafeb_row4_col1" class="data row4 col1">151.5</td>
<td id="T_aafeb_row4_col2" class="data row4 col2">-22.5</td>
<td id="T_aafeb_row4_col3" class="data row4 col3">29.24</td>
<td id="T_aafeb_row4_col4" class="data row4 col4">35.34</td>
<td id="T_aafeb_row4_col5" class="data row4 col5">0.001</td>
<td id="T_aafeb_row4_col6" class="data row4 col6">-0.103</td>
</tr>
<tr class="even">
<td id="T_aafeb_row5_col0" class="data row5 col0">2022-01-13</td>
<td id="T_aafeb_row5_col1" class="data row5 col1">151.5</td>
<td id="T_aafeb_row5_col2" class="data row5 col2">-21.5</td>
<td id="T_aafeb_row5_col3" class="data row5 col3">28.42</td>
<td id="T_aafeb_row5_col4" class="data row5 col4">35.25</td>
<td id="T_aafeb_row5_col5" class="data row5 col5">-0.095</td>
<td id="T_aafeb_row5_col6" class="data row5 col6">0.016</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row6_col0" class="data row6 col0">2022-01-14</td>
<td id="T_aafeb_row6_col1" class="data row6 col1">150.5</td>
<td id="T_aafeb_row6_col2" class="data row6 col2">-21.5</td>
<td id="T_aafeb_row6_col3" class="data row6 col3">28.99</td>
<td id="T_aafeb_row6_col4" class="data row6 col4">35.40</td>
<td id="T_aafeb_row6_col5" class="data row6 col5">-0.064</td>
<td id="T_aafeb_row6_col6" class="data row6 col6">-0.047</td>
</tr>
<tr class="even">
<td id="T_aafeb_row7_col0" class="data row7 col0">2022-01-17</td>
<td id="T_aafeb_row7_col1" class="data row7 col1">150.5</td>
<td id="T_aafeb_row7_col2" class="data row7 col2">-20.5</td>
<td id="T_aafeb_row7_col3" class="data row7 col3">29.39</td>
<td id="T_aafeb_row7_col4" class="data row7 col4">35.34</td>
<td id="T_aafeb_row7_col5" class="data row7 col5">-0.066</td>
<td id="T_aafeb_row7_col6" class="data row7 col6">-0.178</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row8_col0" class="data row8 col0">2022-01-19</td>
<td id="T_aafeb_row8_col1" class="data row8 col1">149.5</td>
<td id="T_aafeb_row8_col2" class="data row8 col2">-20.5</td>
<td id="T_aafeb_row8_col3" class="data row8 col3">29.92</td>
<td id="T_aafeb_row8_col4" class="data row8 col4">35.48</td>
<td id="T_aafeb_row8_col5" class="data row8 col5">0.018</td>
<td id="T_aafeb_row8_col6" class="data row8 col6">-0.104</td>
</tr>
<tr class="even">
<td id="T_aafeb_row9_col0" class="data row9 col0">2022-01-21</td>
<td id="T_aafeb_row9_col1" class="data row9 col1">149.5</td>
<td id="T_aafeb_row9_col2" class="data row9 col2">-19.5</td>
<td id="T_aafeb_row9_col3" class="data row9 col3">29.58</td>
<td id="T_aafeb_row9_col4" class="data row9 col4">35.12</td>
<td id="T_aafeb_row9_col5" class="data row9 col5">-0.161</td>
<td id="T_aafeb_row9_col6" class="data row9 col6">-0.035</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row10_col0" class="data row10 col0">2022-01-23</td>
<td id="T_aafeb_row10_col1" class="data row10 col1">148.5</td>
<td id="T_aafeb_row10_col2" class="data row10 col2">-19.5</td>
<td id="T_aafeb_row10_col3" class="data row10 col3">28.99</td>
<td id="T_aafeb_row10_col4" class="data row10 col4">35.26</td>
<td id="T_aafeb_row10_col5" class="data row10 col5">-0.137</td>
<td id="T_aafeb_row10_col6" class="data row10 col6">-0.022</td>
</tr>
<tr class="even">
<td id="T_aafeb_row11_col0" class="data row11 col0">2022-01-27</td>
<td id="T_aafeb_row11_col1" class="data row11 col1">147.5</td>
<td id="T_aafeb_row11_col2" class="data row11 col2">-18.5</td>
<td id="T_aafeb_row11_col3" class="data row11 col3">29.46</td>
<td id="T_aafeb_row11_col4" class="data row11 col4">33.98</td>
<td id="T_aafeb_row11_col5" class="data row11 col5">0.265</td>
<td id="T_aafeb_row11_col6" class="data row11 col6">0.004</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row12_col0" class="data row12 col0">2022-01-30</td>
<td id="T_aafeb_row12_col1" class="data row12 col1">146.5</td>
<td id="T_aafeb_row12_col2" class="data row12 col2">-18.5</td>
<td id="T_aafeb_row12_col3" class="data row12 col3">30.15</td>
<td id="T_aafeb_row12_col4" class="data row12 col4">34.60</td>
<td id="T_aafeb_row12_col5" class="data row12 col5">-0.184</td>
<td id="T_aafeb_row12_col6" class="data row12 col6">0.143</td>
</tr>
<tr class="even">
<td id="T_aafeb_row13_col0" class="data row13 col0">2022-02-02</td>
<td id="T_aafeb_row13_col1" class="data row13 col1">146.5</td>
<td id="T_aafeb_row13_col2" class="data row13 col2">-17.5</td>
<td id="T_aafeb_row13_col3" class="data row13 col3">30.59</td>
<td id="T_aafeb_row13_col4" class="data row13 col4">34.72</td>
<td id="T_aafeb_row13_col5" class="data row13 col5">0.128</td>
<td id="T_aafeb_row13_col6" class="data row13 col6">-0.054</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row14_col0" class="data row14 col0">2022-02-03</td>
<td id="T_aafeb_row14_col1" class="data row14 col1">153.5</td>
<td id="T_aafeb_row14_col2" class="data row14 col2">-24.5</td>
<td id="T_aafeb_row14_col3" class="data row14 col3">27.06</td>
<td id="T_aafeb_row14_col4" class="data row14 col4">35.32</td>
<td id="T_aafeb_row14_col5" class="data row14 col5">0.550</td>
<td id="T_aafeb_row14_col6" class="data row14 col6">-0.797</td>
</tr>
<tr class="even">
<td id="T_aafeb_row15_col0" class="data row15 col0">2022-02-06</td>
<td id="T_aafeb_row15_col1" class="data row15 col1">146.5</td>
<td id="T_aafeb_row15_col2" class="data row15 col2">-16.5</td>
<td id="T_aafeb_row15_col3" class="data row15 col3">29.14</td>
<td id="T_aafeb_row15_col4" class="data row15 col4">34.70</td>
<td id="T_aafeb_row15_col5" class="data row15 col5">-0.122</td>
<td id="T_aafeb_row15_col6" class="data row15 col6">-0.100</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row16_col0" class="data row16 col0">2022-02-07</td>
<td id="T_aafeb_row16_col1" class="data row16 col1">145.5</td>
<td id="T_aafeb_row16_col2" class="data row16 col2">-16.5</td>
<td id="T_aafeb_row16_col3" class="data row16 col3">30.37</td>
<td id="T_aafeb_row16_col4" class="data row16 col4">34.06</td>
<td id="T_aafeb_row16_col5" class="data row16 col5">-0.104</td>
<td id="T_aafeb_row16_col6" class="data row16 col6">0.200</td>
</tr>
<tr class="even">
<td id="T_aafeb_row17_col0" class="data row17 col0">2022-02-09</td>
<td id="T_aafeb_row17_col1" class="data row17 col1">145.5</td>
<td id="T_aafeb_row17_col2" class="data row17 col2">-15.5</td>
<td id="T_aafeb_row17_col3" class="data row17 col3">29.54</td>
<td id="T_aafeb_row17_col4" class="data row17 col4">34.74</td>
<td id="T_aafeb_row17_col5" class="data row17 col5">-0.120</td>
<td id="T_aafeb_row17_col6" class="data row17 col6">0.064</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row18_col0" class="data row18 col0">2022-02-12</td>
<td id="T_aafeb_row18_col1" class="data row18 col1">153.5</td>
<td id="T_aafeb_row18_col2" class="data row18 col2">-26.5</td>
<td id="T_aafeb_row18_col3" class="data row18 col3">26.80</td>
<td id="T_aafeb_row18_col4" class="data row18 col4">35.38</td>
<td id="T_aafeb_row18_col5" class="data row18 col5">-0.124</td>
<td id="T_aafeb_row18_col6" class="data row18 col6">0.006</td>
</tr>
<tr class="even">
<td id="T_aafeb_row19_col0" class="data row19 col0">2022-02-12</td>
<td id="T_aafeb_row19_col1" class="data row19 col1">145.5</td>
<td id="T_aafeb_row19_col2" class="data row19 col2">-14.5</td>
<td id="T_aafeb_row19_col3" class="data row19 col3">29.90</td>
<td id="T_aafeb_row19_col4" class="data row19 col4">34.72</td>
<td id="T_aafeb_row19_col5" class="data row19 col5">-0.081</td>
<td id="T_aafeb_row19_col6" class="data row19 col6">0.034</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row20_col0" class="data row20 col0">2022-03-25</td>
<td id="T_aafeb_row20_col1" class="data row20 col1">144.5</td>
<td id="T_aafeb_row20_col2" class="data row20 col2">-13.5</td>
<td id="T_aafeb_row20_col3" class="data row20 col3">29.04</td>
<td id="T_aafeb_row20_col4" class="data row20 col4">34.75</td>
<td id="T_aafeb_row20_col5" class="data row20 col5">-0.457</td>
<td id="T_aafeb_row20_col6" class="data row20 col6">0.360</td>
</tr>
<tr class="even">
<td id="T_aafeb_row21_col0" class="data row21 col0">2022-04-01</td>
<td id="T_aafeb_row21_col1" class="data row21 col1">143.5</td>
<td id="T_aafeb_row21_col2" class="data row21 col2">-12.5</td>
<td id="T_aafeb_row21_col3" class="data row21 col3">30.14</td>
<td id="T_aafeb_row21_col4" class="data row21 col4">34.44</td>
<td id="T_aafeb_row21_col5" class="data row21 col5">0.025</td>
<td id="T_aafeb_row21_col6" class="data row21 col6">-0.018</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row22_col0" class="data row22 col0">2022-04-09</td>
<td id="T_aafeb_row22_col1" class="data row22 col1">143.5</td>
<td id="T_aafeb_row22_col2" class="data row22 col2">-11.5</td>
<td id="T_aafeb_row22_col3" class="data row22 col3">29.93</td>
<td id="T_aafeb_row22_col4" class="data row22 col4">34.56</td>
<td id="T_aafeb_row22_col5" class="data row22 col5">-0.097</td>
<td id="T_aafeb_row22_col6" class="data row22 col6">0.144</td>
</tr>
<tr class="even">
<td id="T_aafeb_row23_col0" class="data row23 col0">2022-04-14</td>
<td id="T_aafeb_row23_col1" class="data row23 col1">143.5</td>
<td id="T_aafeb_row23_col2" class="data row23 col2">-10.5</td>
<td id="T_aafeb_row23_col3" class="data row23 col3">29.48</td>
<td id="T_aafeb_row23_col4" class="data row23 col4">34.42</td>
<td id="T_aafeb_row23_col5" class="data row23 col5">-0.041</td>
<td id="T_aafeb_row23_col6" class="data row23 col6">0.078</td>
</tr>
<tr class="odd">
<td id="T_aafeb_row24_col0" class="data row24 col0">2022-04-21</td>
<td id="T_aafeb_row24_col1" class="data row24 col1">143.5</td>
<td id="T_aafeb_row24_col2" class="data row24 col2">-9.5</td>
<td id="T_aafeb_row24_col3" class="data row24 col3">29.56</td>
<td id="T_aafeb_row24_col4" class="data row24 col4">34.19</td>
<td id="T_aafeb_row24_col5" class="data row24 col5">0.059</td>
<td id="T_aafeb_row24_col6" class="data row24 col6">0.034</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="match-extracted-data-to-tracking-data" class="level2">
<h2 class="anchored" data-anchor-id="match-extracted-data-to-tracking-data">Match extracted data to tracking data</h2>
<p>We will match up the eReefs data with our tracking detections by combining the two datasets based on common date, longitude and latitude values.</p>
<div id="aa736e9a" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename lon and lat columns of extracted_data to longitude, latitude (to match those of data)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="op">=</span> extracted_data.rename(columns <span class="op">=</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'lon'</span>: <span class="st">'longitude'</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'lat'</span>: <span class="st">'latitude'</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the two datasets based on common date, lon and lat values</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>combined_data <span class="op">=</span> pd.merge(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  data, extracted_data, </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  on <span class="op">=</span> [<span class="st">'date'</span>, <span class="st">'longitude'</span>, <span class="st">'latitude'</span>]</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the combined data (reorder columns; sort by date and time; format numeric columns' decimal places)</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>tbl_combined <span class="op">=</span> combined_data.<span class="op">\</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  reindex(columns <span class="op">=</span> [<span class="st">'date'</span>, <span class="st">'time'</span>, <span class="st">'longitude'</span>, <span class="st">'latitude'</span>, <span class="st">'record_id'</span>, <span class="st">'temp'</span>, <span class="st">'salt'</span>, <span class="st">'u'</span>, <span class="st">'v'</span>]).<span class="op">\</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  sort_values(by <span class="op">=</span> [<span class="st">'date'</span>, <span class="st">'time'</span>]).<span class="op">\</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  style.<span class="op">\</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  hide(axis <span class="op">=</span> <span class="st">'index'</span>).<span class="op">\</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="bu">format</span>({</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'longitude'</span>, <span class="st">'latitude'</span>], <span class="st">'</span><span class="sc">{:.1f}</span><span class="st">'</span>),</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'temp'</span>, <span class="st">'salt'</span>], <span class="st">'</span><span class="sc">{:.2f}</span><span class="st">'</span>), </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span><span class="bu">dict</span>.fromkeys([<span class="st">'u'</span>, <span class="st">'v'</span>], <span class="st">'</span><span class="sc">{:.3f}</span><span class="st">'</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>display(tbl_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell scroll_box_xy" data-execution_count="9">
<div id="tbl-combined-data" class="cell scroll_box_xy quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="9">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-combined-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Loggerhead Sea Turtle (<em>Caretta caretta</em>) tracking detections (Strydom, 2022) and corresponding eReefs daily mean temperature, salinity, east- and northward current velocities (u, v respectively).
</figcaption>
<div aria-describedby="tbl-combined-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="9">
<style type="text/css">
</style>

<table id="T_88f64" class="do-not-create-environment cell scroll_box_xy caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_88f64_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">date</th>
<th id="T_88f64_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">time</th>
<th id="T_88f64_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">longitude</th>
<th id="T_88f64_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">latitude</th>
<th id="T_88f64_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">record_id</th>
<th id="T_88f64_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">temp</th>
<th id="T_88f64_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">salt</th>
<th id="T_88f64_level0_col7" class="col_heading level0 col7" data-quarto-table-cell-role="th">u</th>
<th id="T_88f64_level0_col8" class="col_heading level0 col8" data-quarto-table-cell-role="th">v</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_88f64_row0_col0" class="data row0 col0">2021-12-21</td>
<td id="T_88f64_row0_col1" class="data row0 col1">17:57</td>
<td id="T_88f64_row0_col2" class="data row0 col2">152.5</td>
<td id="T_88f64_row0_col3" class="data row0 col3">-24.5</td>
<td id="T_88f64_row0_col4" class="data row0 col4">4022992328</td>
<td id="T_88f64_row0_col5" class="data row0 col5">28.09</td>
<td id="T_88f64_row0_col6" class="data row0 col6">35.26</td>
<td id="T_88f64_row0_col7" class="data row0 col7">0.071</td>
<td id="T_88f64_row0_col8" class="data row0 col8">-0.020</td>
</tr>
<tr class="even">
<td id="T_88f64_row1_col0" class="data row1 col0">2022-01-02</td>
<td id="T_88f64_row1_col1" class="data row1 col1">21:49</td>
<td id="T_88f64_row1_col2" class="data row1 col2">153.5</td>
<td id="T_88f64_row1_col3" class="data row1 col3">-25.5</td>
<td id="T_88f64_row1_col4" class="data row1 col4">4022992329</td>
<td id="T_88f64_row1_col5" class="data row1 col5">26.00</td>
<td id="T_88f64_row1_col6" class="data row1 col6">35.30</td>
<td id="T_88f64_row1_col7" class="data row1 col7">-0.035</td>
<td id="T_88f64_row1_col8" class="data row1 col8">0.038</td>
</tr>
<tr class="odd">
<td id="T_88f64_row2_col0" class="data row2 col0">2022-01-05</td>
<td id="T_88f64_row2_col1" class="data row2 col1">07:33</td>
<td id="T_88f64_row2_col2" class="data row2 col2">152.5</td>
<td id="T_88f64_row2_col3" class="data row2 col3">-23.5</td>
<td id="T_88f64_row2_col4" class="data row2 col4">4022992304</td>
<td id="T_88f64_row2_col5" class="data row2 col5">25.64</td>
<td id="T_88f64_row2_col6" class="data row2 col6">35.23</td>
<td id="T_88f64_row2_col7" class="data row2 col7">0.030</td>
<td id="T_88f64_row2_col8" class="data row2 col8">0.015</td>
</tr>
<tr class="even">
<td id="T_88f64_row3_col0" class="data row3 col0">2022-01-06</td>
<td id="T_88f64_row3_col1" class="data row3 col1">05:03</td>
<td id="T_88f64_row3_col2" class="data row3 col2">151.5</td>
<td id="T_88f64_row3_col3" class="data row3 col3">-23.5</td>
<td id="T_88f64_row3_col4" class="data row3 col4">4022992302</td>
<td id="T_88f64_row3_col5" class="data row3 col5">28.13</td>
<td id="T_88f64_row3_col6" class="data row3 col6">35.41</td>
<td id="T_88f64_row3_col7" class="data row3 col7">-0.033</td>
<td id="T_88f64_row3_col8" class="data row3 col8">0.015</td>
</tr>
<tr class="odd">
<td id="T_88f64_row4_col0" class="data row4 col0">2022-01-09</td>
<td id="T_88f64_row4_col1" class="data row4 col1">20:25</td>
<td id="T_88f64_row4_col2" class="data row4 col2">151.5</td>
<td id="T_88f64_row4_col3" class="data row4 col3">-22.5</td>
<td id="T_88f64_row4_col4" class="data row4 col4">4022992319</td>
<td id="T_88f64_row4_col5" class="data row4 col5">29.24</td>
<td id="T_88f64_row4_col6" class="data row4 col6">35.34</td>
<td id="T_88f64_row4_col7" class="data row4 col7">0.001</td>
<td id="T_88f64_row4_col8" class="data row4 col8">-0.103</td>
</tr>
<tr class="even">
<td id="T_88f64_row5_col0" class="data row5 col0">2022-01-13</td>
<td id="T_88f64_row5_col1" class="data row5 col1">06:28</td>
<td id="T_88f64_row5_col2" class="data row5 col2">151.5</td>
<td id="T_88f64_row5_col3" class="data row5 col3">-21.5</td>
<td id="T_88f64_row5_col4" class="data row5 col4">4022992308</td>
<td id="T_88f64_row5_col5" class="data row5 col5">28.42</td>
<td id="T_88f64_row5_col6" class="data row5 col6">35.25</td>
<td id="T_88f64_row5_col7" class="data row5 col7">-0.095</td>
<td id="T_88f64_row5_col8" class="data row5 col8">0.016</td>
</tr>
<tr class="odd">
<td id="T_88f64_row6_col0" class="data row6 col0">2022-01-14</td>
<td id="T_88f64_row6_col1" class="data row6 col1">18:26</td>
<td id="T_88f64_row6_col2" class="data row6 col2">150.5</td>
<td id="T_88f64_row6_col3" class="data row6 col3">-21.5</td>
<td id="T_88f64_row6_col4" class="data row6 col4">4022992318</td>
<td id="T_88f64_row6_col5" class="data row6 col5">28.99</td>
<td id="T_88f64_row6_col6" class="data row6 col6">35.40</td>
<td id="T_88f64_row6_col7" class="data row6 col7">-0.064</td>
<td id="T_88f64_row6_col8" class="data row6 col8">-0.047</td>
</tr>
<tr class="even">
<td id="T_88f64_row7_col0" class="data row7 col0">2022-01-17</td>
<td id="T_88f64_row7_col1" class="data row7 col1">17:06</td>
<td id="T_88f64_row7_col2" class="data row7 col2">150.5</td>
<td id="T_88f64_row7_col3" class="data row7 col3">-20.5</td>
<td id="T_88f64_row7_col4" class="data row7 col4">4022992330</td>
<td id="T_88f64_row7_col5" class="data row7 col5">29.39</td>
<td id="T_88f64_row7_col6" class="data row7 col6">35.34</td>
<td id="T_88f64_row7_col7" class="data row7 col7">-0.066</td>
<td id="T_88f64_row7_col8" class="data row7 col8">-0.178</td>
</tr>
<tr class="odd">
<td id="T_88f64_row8_col0" class="data row8 col0">2022-01-19</td>
<td id="T_88f64_row8_col1" class="data row8 col1">17:44</td>
<td id="T_88f64_row8_col2" class="data row8 col2">149.5</td>
<td id="T_88f64_row8_col3" class="data row8 col3">-20.5</td>
<td id="T_88f64_row8_col4" class="data row8 col4">4022992320</td>
<td id="T_88f64_row8_col5" class="data row8 col5">29.92</td>
<td id="T_88f64_row8_col6" class="data row8 col6">35.48</td>
<td id="T_88f64_row8_col7" class="data row8 col7">0.018</td>
<td id="T_88f64_row8_col8" class="data row8 col8">-0.104</td>
</tr>
<tr class="even">
<td id="T_88f64_row9_col0" class="data row9 col0">2022-01-21</td>
<td id="T_88f64_row9_col1" class="data row9 col1">07:22</td>
<td id="T_88f64_row9_col2" class="data row9 col2">149.5</td>
<td id="T_88f64_row9_col3" class="data row9 col3">-19.5</td>
<td id="T_88f64_row9_col4" class="data row9 col4">4022992316</td>
<td id="T_88f64_row9_col5" class="data row9 col5">29.58</td>
<td id="T_88f64_row9_col6" class="data row9 col6">35.12</td>
<td id="T_88f64_row9_col7" class="data row9 col7">-0.161</td>
<td id="T_88f64_row9_col8" class="data row9 col8">-0.035</td>
</tr>
<tr class="odd">
<td id="T_88f64_row10_col0" class="data row10 col0">2022-01-23</td>
<td id="T_88f64_row10_col1" class="data row10 col1">07:02</td>
<td id="T_88f64_row10_col2" class="data row10 col2">148.5</td>
<td id="T_88f64_row10_col3" class="data row10 col3">-19.5</td>
<td id="T_88f64_row10_col4" class="data row10 col4">4022992323</td>
<td id="T_88f64_row10_col5" class="data row10 col5">28.99</td>
<td id="T_88f64_row10_col6" class="data row10 col6">35.26</td>
<td id="T_88f64_row10_col7" class="data row10 col7">-0.137</td>
<td id="T_88f64_row10_col8" class="data row10 col8">-0.022</td>
</tr>
<tr class="even">
<td id="T_88f64_row11_col0" class="data row11 col0">2022-01-27</td>
<td id="T_88f64_row11_col1" class="data row11 col1">17:00</td>
<td id="T_88f64_row11_col2" class="data row11 col2">147.5</td>
<td id="T_88f64_row11_col3" class="data row11 col3">-18.5</td>
<td id="T_88f64_row11_col4" class="data row11 col4">4022992327</td>
<td id="T_88f64_row11_col5" class="data row11 col5">29.46</td>
<td id="T_88f64_row11_col6" class="data row11 col6">33.98</td>
<td id="T_88f64_row11_col7" class="data row11 col7">0.265</td>
<td id="T_88f64_row11_col8" class="data row11 col8">0.004</td>
</tr>
<tr class="odd">
<td id="T_88f64_row12_col0" class="data row12 col0">2022-01-30</td>
<td id="T_88f64_row12_col1" class="data row12 col1">17:02</td>
<td id="T_88f64_row12_col2" class="data row12 col2">146.5</td>
<td id="T_88f64_row12_col3" class="data row12 col3">-18.5</td>
<td id="T_88f64_row12_col4" class="data row12 col4">4022992314</td>
<td id="T_88f64_row12_col5" class="data row12 col5">30.15</td>
<td id="T_88f64_row12_col6" class="data row12 col6">34.60</td>
<td id="T_88f64_row12_col7" class="data row12 col7">-0.184</td>
<td id="T_88f64_row12_col8" class="data row12 col8">0.143</td>
</tr>
<tr class="even">
<td id="T_88f64_row13_col0" class="data row13 col0">2022-02-02</td>
<td id="T_88f64_row13_col1" class="data row13 col1">09:14</td>
<td id="T_88f64_row13_col2" class="data row13 col2">146.5</td>
<td id="T_88f64_row13_col3" class="data row13 col3">-17.5</td>
<td id="T_88f64_row13_col4" class="data row13 col4">4022992301</td>
<td id="T_88f64_row13_col5" class="data row13 col5">30.59</td>
<td id="T_88f64_row13_col6" class="data row13 col6">34.72</td>
<td id="T_88f64_row13_col7" class="data row13 col7">0.128</td>
<td id="T_88f64_row13_col8" class="data row13 col8">-0.054</td>
</tr>
<tr class="odd">
<td id="T_88f64_row14_col0" class="data row14 col0">2022-02-03</td>
<td id="T_88f64_row14_col1" class="data row14 col1">21:37</td>
<td id="T_88f64_row14_col2" class="data row14 col2">153.5</td>
<td id="T_88f64_row14_col3" class="data row14 col3">-24.5</td>
<td id="T_88f64_row14_col4" class="data row14 col4">4022992313</td>
<td id="T_88f64_row14_col5" class="data row14 col5">27.06</td>
<td id="T_88f64_row14_col6" class="data row14 col6">35.32</td>
<td id="T_88f64_row14_col7" class="data row14 col7">0.550</td>
<td id="T_88f64_row14_col8" class="data row14 col8">-0.797</td>
</tr>
<tr class="even">
<td id="T_88f64_row15_col0" class="data row15 col0">2022-02-06</td>
<td id="T_88f64_row15_col1" class="data row15 col1">18:25</td>
<td id="T_88f64_row15_col2" class="data row15 col2">146.5</td>
<td id="T_88f64_row15_col3" class="data row15 col3">-16.5</td>
<td id="T_88f64_row15_col4" class="data row15 col4">4022992303</td>
<td id="T_88f64_row15_col5" class="data row15 col5">29.14</td>
<td id="T_88f64_row15_col6" class="data row15 col6">34.70</td>
<td id="T_88f64_row15_col7" class="data row15 col7">-0.122</td>
<td id="T_88f64_row15_col8" class="data row15 col8">-0.100</td>
</tr>
<tr class="odd">
<td id="T_88f64_row16_col0" class="data row16 col0">2022-02-07</td>
<td id="T_88f64_row16_col1" class="data row16 col1">07:15</td>
<td id="T_88f64_row16_col2" class="data row16 col2">145.5</td>
<td id="T_88f64_row16_col3" class="data row16 col3">-16.5</td>
<td id="T_88f64_row16_col4" class="data row16 col4">4022992310</td>
<td id="T_88f64_row16_col5" class="data row16 col5">30.37</td>
<td id="T_88f64_row16_col6" class="data row16 col6">34.06</td>
<td id="T_88f64_row16_col7" class="data row16 col7">-0.104</td>
<td id="T_88f64_row16_col8" class="data row16 col8">0.200</td>
</tr>
<tr class="even">
<td id="T_88f64_row17_col0" class="data row17 col0">2022-02-09</td>
<td id="T_88f64_row17_col1" class="data row17 col1">18:33</td>
<td id="T_88f64_row17_col2" class="data row17 col2">145.5</td>
<td id="T_88f64_row17_col3" class="data row17 col3">-15.5</td>
<td id="T_88f64_row17_col4" class="data row17 col4">4022992311</td>
<td id="T_88f64_row17_col5" class="data row17 col5">29.54</td>
<td id="T_88f64_row17_col6" class="data row17 col6">34.74</td>
<td id="T_88f64_row17_col7" class="data row17 col7">-0.120</td>
<td id="T_88f64_row17_col8" class="data row17 col8">0.064</td>
</tr>
<tr class="odd">
<td id="T_88f64_row18_col0" class="data row18 col0">2022-02-12</td>
<td id="T_88f64_row18_col1" class="data row18 col1">08:59</td>
<td id="T_88f64_row18_col2" class="data row18 col2">153.5</td>
<td id="T_88f64_row18_col3" class="data row18 col3">-26.5</td>
<td id="T_88f64_row18_col4" class="data row18 col4">4022992324</td>
<td id="T_88f64_row18_col5" class="data row18 col5">26.80</td>
<td id="T_88f64_row18_col6" class="data row18 col6">35.38</td>
<td id="T_88f64_row18_col7" class="data row18 col7">-0.124</td>
<td id="T_88f64_row18_col8" class="data row18 col8">0.006</td>
</tr>
<tr class="even">
<td id="T_88f64_row19_col0" class="data row19 col0">2022-02-12</td>
<td id="T_88f64_row19_col1" class="data row19 col1">10:34</td>
<td id="T_88f64_row19_col2" class="data row19 col2">145.5</td>
<td id="T_88f64_row19_col3" class="data row19 col3">-14.5</td>
<td id="T_88f64_row19_col4" class="data row19 col4">4022992325</td>
<td id="T_88f64_row19_col5" class="data row19 col5">29.90</td>
<td id="T_88f64_row19_col6" class="data row19 col6">34.72</td>
<td id="T_88f64_row19_col7" class="data row19 col7">-0.081</td>
<td id="T_88f64_row19_col8" class="data row19 col8">0.034</td>
</tr>
<tr class="odd">
<td id="T_88f64_row20_col0" class="data row20 col0">2022-03-25</td>
<td id="T_88f64_row20_col1" class="data row20 col1">07:10</td>
<td id="T_88f64_row20_col2" class="data row20 col2">144.5</td>
<td id="T_88f64_row20_col3" class="data row20 col3">-13.5</td>
<td id="T_88f64_row20_col4" class="data row20 col4">4022992309</td>
<td id="T_88f64_row20_col5" class="data row20 col5">29.04</td>
<td id="T_88f64_row20_col6" class="data row20 col6">34.75</td>
<td id="T_88f64_row20_col7" class="data row20 col7">-0.457</td>
<td id="T_88f64_row20_col8" class="data row20 col8">0.360</td>
</tr>
<tr class="even">
<td id="T_88f64_row21_col0" class="data row21 col0">2022-04-01</td>
<td id="T_88f64_row21_col1" class="data row21 col1">18:41</td>
<td id="T_88f64_row21_col2" class="data row21 col2">143.5</td>
<td id="T_88f64_row21_col3" class="data row21 col3">-12.5</td>
<td id="T_88f64_row21_col4" class="data row21 col4">4022992307</td>
<td id="T_88f64_row21_col5" class="data row21 col5">30.14</td>
<td id="T_88f64_row21_col6" class="data row21 col6">34.44</td>
<td id="T_88f64_row21_col7" class="data row21 col7">0.025</td>
<td id="T_88f64_row21_col8" class="data row21 col8">-0.018</td>
</tr>
<tr class="odd">
<td id="T_88f64_row22_col0" class="data row22 col0">2022-04-09</td>
<td id="T_88f64_row22_col1" class="data row22 col1">22:00</td>
<td id="T_88f64_row22_col2" class="data row22 col2">143.5</td>
<td id="T_88f64_row22_col3" class="data row22 col3">-11.5</td>
<td id="T_88f64_row22_col4" class="data row22 col4">4022992317</td>
<td id="T_88f64_row22_col5" class="data row22 col5">29.93</td>
<td id="T_88f64_row22_col6" class="data row22 col6">34.56</td>
<td id="T_88f64_row22_col7" class="data row22 col7">-0.097</td>
<td id="T_88f64_row22_col8" class="data row22 col8">0.144</td>
</tr>
<tr class="even">
<td id="T_88f64_row23_col0" class="data row23 col0">2022-04-14</td>
<td id="T_88f64_row23_col1" class="data row23 col1">06:31</td>
<td id="T_88f64_row23_col2" class="data row23 col2">143.5</td>
<td id="T_88f64_row23_col3" class="data row23 col3">-10.5</td>
<td id="T_88f64_row23_col4" class="data row23 col4">4022992321</td>
<td id="T_88f64_row23_col5" class="data row23 col5">29.48</td>
<td id="T_88f64_row23_col6" class="data row23 col6">34.42</td>
<td id="T_88f64_row23_col7" class="data row23 col7">-0.041</td>
<td id="T_88f64_row23_col8" class="data row23 col8">0.078</td>
</tr>
<tr class="odd">
<td id="T_88f64_row24_col0" class="data row24 col0">2022-04-21</td>
<td id="T_88f64_row24_col1" class="data row24 col1">10:30</td>
<td id="T_88f64_row24_col2" class="data row24 col2">143.5</td>
<td id="T_88f64_row24_col3" class="data row24 col3">-9.5</td>
<td id="T_88f64_row24_col4" class="data row24 col4">4022992305</td>
<td id="T_88f64_row24_col5" class="data row24 col5">29.56</td>
<td id="T_88f64_row24_col6" class="data row24 col6">34.19</td>
<td id="T_88f64_row24_col7" class="data row24 col7">0.059</td>
<td id="T_88f64_row24_col8" class="data row24 col8">0.034</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Hooray! We now have our combined dataset of the Loggerhead Sea Turtle tracking detections and the corresponding eReefs daily aggregated data (<a href="#tbl-combined-data" class="quarto-xref">Table&nbsp;3</a>).</p>
<p><br><br><br><br><br><br><br><br><br><br><br>Strydom A. 2022. Wreck Rock Turtle Care - satellite tracking. Data downloaded from <a href="http://seamap.env.duke.edu/dataset/2178">OBIS-SEAMAP</a>; originated from <a href="http://www.seaturtle.org/tracking/index.shtml?project_id=1381">Satellite Tracking and Analysis Tool (STAT)</a>. <a href="https://doi.org/10.15468/k4s6ap">DOI: 10.15468/k4s6ap</a> accessed via <a href="https://www.gbif.org/">GBIF.org</a> on 2023-02-17.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>